<!DOCTYPE html>
<html>
<head>
  <title>Nostradamus 6.0</title>
  <style>
    #map { height: 1000px; width: 100%; }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhoLkGlzoNc9P2hMogC5PZDjEWUMMZ68E&callback=initMap" async defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script>
    let map;

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 0, lng: 0},
        zoom: 2
      });

      loadData();
    }

    function loadData() {
      const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTVJNB6UFGX5ICSN1yto8yNUoHo5F_EAU_1tLGhugpkkqIbxUNuNoYQgwgnC3BQbmnWC45MGcJ9JW-U/pub?output=csv';

      Papa.parse(csvUrl, {
        download: true,
        header: true,
        complete: function(results) {
          results.data.forEach(row => {
            if (row["Log to Map"] === 'YES' && row.Latitude && row.Longitude) {
              const lat = parseFloat(row.Latitude);
              const lng = parseFloat(row.Longitude);

              if (!isNaN(lat) && !isNaN(lng)) {
                new google.maps.Marker({
                  position: {lat: lat, lng: lng},
                  map: map,
                  title: row.Title
                });
              }
            }
          });
        }
      });
    }
  </script>
</head>
<body>
  <h1>Nostradamus 6.0</h1>
  <div id="map"></div>
</body>
</html>
